import React from 'react';
import { MemoryRouter } from 'react-router-dom';
import { storiesOf } from '@storybook/react';
import { action } from '@storybook/addon-actions';

import Link from '../../Link';
import ButtonAsLink from '../../ButtonAsLink';
import SvgIcon from '../../SvgIcon';

import Layout from './Layout';
import Content from './Content';
import Main from './Main';
import Sidebar, { Product, Profile } from './Sidebar';
import Nav, { NavLink, NavDropdown, NavDropdownLink } from './Sidebar/Nav';
import Header, { MainTitle, Search, Actions } from './Header';

const PowerOffIcon = () => (
  <SvgIcon viewBox="0 0 14 15">
    <path d="M10.74 1.28611C12.6989 2.50833 14.0001 4.66111 14.0001 7.1111C14.0001 10.9111 10.8727 13.9916 7.01422 14C3.1614 14.0083 0.00575655 10.9167 0.000111394 7.12221C-0.00271119 4.66666 1.2985 2.50833 3.26019 1.28611C3.4239 1.18333 3.64124 1.23611 3.73721 1.40278L3.84729 1.59722C3.93479 1.75278 3.88398 1.94722 3.73156 2.04166C2.02955 3.11111 0.903337 4.98888 0.903337 7.1111C0.903337 10.4417 3.64971 13.1111 7.00011 13.1111C10.3844 13.1111 13.0969 10.4083 13.0969 7.1111C13.0969 4.97222 11.965 3.10555 10.2658 2.04444C10.1134 1.95 10.0626 1.75278 10.1501 1.6L10.2602 1.40555C10.3562 1.23611 10.5763 1.18611 10.74 1.28611ZM7.45172 7.66666V0.333333C7.45172 0.15 7.2993 0 7.11301 0H6.88721C6.70092 0 6.5485 0.15 6.5485 0.333333V7.66666C6.5485 7.84999 6.70092 7.99999 6.88721 7.99999H7.11301C7.2993 7.99999 7.45172 7.84999 7.45172 7.66666Z" />
  </SvgIcon>
);

const PlusIcon = () => (
  <SvgIcon viewBox="0 0 15 15">
    <path d="M0.3125 6.5625H6.5625V0.3125C6.5625 0.139844 6.70234 0 6.875 0H8.125C8.29766 0 8.4375 0.139844 8.4375 0.3125V6.5625H14.6875C14.8602 6.5625 15 6.70234 15 6.875V8.125C15 8.29766 14.8602 8.4375 14.6875 8.4375H8.4375V14.6875C8.4375 14.8602 8.29766 15 8.125 15H6.875C6.70234 15 6.5625 14.8602 6.5625 14.6875V8.4375H0.3125C0.139844 8.4375 0 8.29766 0 8.125V6.875C0 6.70234 0.139844 6.5625 0.3125 6.5625Z" />
  </SvgIcon>
);

const UsersIcon = props => (
  <SvgIcon viewBox="0 0 14 16" {...props}>
    <path d="M4.2 9C5.09688 9 5.52812 9.5 7 9.5C8.47188 9.5 8.9 9 9.8 9C12.1188 9 14 10.8813 14 13.2V14.5C14 15.3281 13.3281 16 12.5 16H1.5C0.671875 16 0 15.3281 0 14.5V13.2C0 10.8813 1.88125 9 4.2 9ZM1 14.5C1 14.775 1.225 15 1.5 15H12.5C12.775 15 13 14.775 13 14.5V13.2C13 11.4344 11.5656 10 9.8 10C9.1875 10 8.57812 10.5 7 10.5C5.425 10.5 4.8125 10 4.2 10C2.43437 10 1 11.4344 1 13.2V14.5ZM7 8C4.79062 8 3 6.20937 3 4C3 1.79063 4.79062 0 7 0C9.20937 0 11 1.79063 11 4C11 6.20937 9.20937 8 7 8ZM7 1C5.34688 1 4 2.34687 4 4C4 5.65312 5.34688 7 7 7C8.65312 7 10 5.65312 10 4C10 2.34687 8.65312 1 7 1Z" />
  </SvgIcon>
);

const FeedbacksIcon = props => (
  <SvgIcon viewBox="0 0 16 13" {...props}>
    <path d="M14.7736 10.2758C15.5373 9.48962 15.9955 8.50324 15.9955 7.42691C15.9955 5.106 13.8711 3.18835 11.1025 2.84602C10.2305 1.17496 8.17279 0 5.77627 0C2.58554 0 0.000187032 2.07721 0.000187032 4.64182C0.000187032 5.71524 0.458386 6.70163 1.22205 7.49074C0.797175 8.38139 0.186244 9.07186 0.175136 9.08346C0.000187037 9.27784 -0.0497983 9.56215 0.0529493 9.80875C0.15292 10.0553 0.386185 10.2149 0.641665 10.2149C2.12734 10.2149 3.32699 9.62888 4.11842 9.08927C4.37113 9.15019 4.62938 9.19661 4.89597 9.22852C5.77072 10.8967 7.82567 12.0716 10.2222 12.0716C10.7998 12.0716 11.3552 12.002 11.8828 11.8744C12.6742 12.4111 13.8711 13 15.3596 13C15.615 13 15.8455 12.8404 15.9483 12.5938C16.0483 12.3472 16.001 12.0629 15.8261 11.8686C15.8122 11.857 15.1985 11.1665 14.7736 10.2758ZM3.94903 8.09418L3.63245 8.30886C3.07428 8.68891 2.23009 9.12698 1.19706 9.25173C1.44143 8.9239 1.758 8.45102 2.01626 7.9056L2.30507 7.30217L1.84687 6.82928C1.40811 6.3796 0.888815 5.63401 0.888815 4.64182C0.888815 2.59362 3.08262 0.928364 5.77627 0.928364C8.46992 0.928364 10.6637 2.59362 10.6637 4.64182C10.6637 6.69002 8.46992 8.35528 5.77627 8.35528C5.28475 8.35528 4.79322 8.29726 4.31559 8.18121L3.94903 8.09418ZM12.3632 11.094L12.0467 10.8793L11.6801 10.9692C11.2025 11.0852 10.7109 11.1433 10.2194 11.1433C8.41161 11.1433 6.83152 10.3919 5.98732 9.27784C9.07808 9.185 11.5524 7.1484 11.5524 4.64182C11.5524 4.36621 11.5163 4.09931 11.4607 3.83821C13.5545 4.25887 15.1069 5.70654 15.1069 7.42691C15.1069 8.4191 14.5876 9.1647 14.1488 9.61437L13.6906 10.0873L13.9766 10.6878C14.2377 11.2361 14.5542 11.709 14.7958 12.0339C13.7656 11.9121 12.9214 11.4711 12.3632 11.094ZM11.3135 3.32761C11.3163 3.33341 11.3163 3.33921 11.3191 3.34501C11.3163 3.33921 11.3163 3.33341 11.3135 3.32761Z" />
  </SvgIcon>
);

const ArchiveIcon = props => (
  <SvgIcon viewBox="0 0 12 12" {...props}>
    <path d="M10.875 0H1.125C0.503906 0 0 0.575893 0 1.28571V3C0 3.23571 0.16875 3.42857 0.375 3.42857H0.75V10.7143C0.75 11.4241 1.25391 12 1.875 12H10.125C10.7461 12 11.25 11.4241 11.25 10.7143V3.42857H11.625C11.8313 3.42857 12 3.23571 12 3V1.28571C12 0.575893 11.4961 0 10.875 0ZM10.5 10.7143C10.5 10.95 10.3313 11.1429 10.125 11.1429H1.875C1.66875 11.1429 1.5 10.95 1.5 10.7143V3.42857H10.5V10.7143ZM11.25 2.57143H0.75V1.28571C0.75 1.05 0.91875 0.857143 1.125 0.857143H10.875C11.0813 0.857143 11.25 1.05 11.25 1.28571V2.57143ZM4.78125 6H7.21875C7.37344 6 7.5 5.85536 7.5 5.67857V5.46429C7.5 5.2875 7.37344 5.14286 7.21875 5.14286H4.78125C4.62656 5.14286 4.5 5.2875 4.5 5.46429V5.67857C4.5 5.85536 4.62656 6 4.78125 6Z" />
  </SvgIcon>
);

const QuestionsIcon = props => (
  <SvgIcon viewBox="0 0 16 16" {...props}>
    <path d="M8 10.7097C7.50116 10.7097 7.09677 11.1141 7.09677 11.6129C7.09677 12.1117 7.50116 12.5161 8 12.5161C8.49884 12.5161 8.90323 12.1117 8.90323 11.6129C8.90323 11.1141 8.49884 10.7097 8 10.7097ZM8.24742 9.93548H7.73129C7.51752 9.93548 7.34419 9.76216 7.34419 9.54839V9.5361C7.34419 7.26697 9.84226 7.48387 9.84226 6.07132C9.84226 5.42564 9.26932 4.77419 7.98935 4.77419C7.04923 4.77419 6.56145 5.08545 6.07932 5.69974C5.95326 5.86039 5.72274 5.89313 5.55519 5.77639L5.13152 5.48123C4.95006 5.35481 4.91023 5.10152 5.04619 4.92713C5.7309 4.04884 6.54329 3.48387 7.98935 3.48387C9.6771 3.48387 11.1326 4.44358 11.1326 6.07132C11.1326 8.24597 8.63452 8.13097 8.63452 9.5361V9.54839C8.63452 9.76216 8.46119 9.93548 8.24742 9.93548ZM8 1.03226C11.8265 1.03226 14.9677 4.13145 14.9677 8C14.9677 11.8481 11.8513 14.9677 8 14.9677C4.15342 14.9677 1.03226 11.8528 1.03226 8C1.03226 4.15474 4.14845 1.03226 8 1.03226ZM8 0C3.58203 0 0 3.58332 0 8C0 12.4193 3.58203 16 8 16C12.418 16 16 12.4193 16 8C16 3.58332 12.418 0 8 0Z" />
  </SvgIcon>
);

storiesOf('layouts/dashboard', module).add('Layout', () => (
  <MemoryRouter initialEntries={['/']}>
    <Layout>
      <Sidebar>
        <Product>
          <Product.Logo />
          <Product.Title>Название</Product.Title>
        </Product>
        <Nav>
          <NavLink to="/questions" icon={QuestionsIcon} text="Раздел" />
          <NavDropdown icon={FeedbacksIcon} text="Раздел">
            <NavDropdownLink exact text="Подраздел" to="/feedbacks" />
            <NavDropdownLink icon={ArchiveIcon} text="Подраздел" to="/feedbacks/archive" />
          </NavDropdown>
        </Nav>
        <Profile avatarAlt="ФИ" userName="Фамилия Имя" userRole="Администратор системы">
          <Profile.Item icon={UsersIcon} text="Мой профиль" component={Link} to="/profiles" />
          <Profile.Item icon={PowerOffIcon} text="Выйти" onClick={action('logout')} />
        </Profile>
      </Sidebar>
      <Content>
        <Header>
          <MainTitle>Название раздела</MainTitle>
          <Search onChange={action('searchChange')} />
          <Actions>
            <Actions.Item>
              <ButtonAsLink variant="float" to="/">
                <PlusIcon />
              </ButtonAsLink>
            </Actions.Item>
          </Actions>
        </Header>
        <Main>
          <div>Main</div>
        </Main>
      </Content>
    </Layout>
  </MemoryRouter>
));
